/* === TARJETA LIBRO (CLARA & VIVA 2025) === */
.book-card { --card-height:360px; position:relative; display:flex; flex-direction:column; background:linear-gradient(180deg,#ffffff 0%,#f7faff 100%); border:1px solid #e2eaf2; border-radius:20px; overflow:hidden; box-shadow:0 3px 8px rgba(38,78,146,.06),0 1px 2px rgba(38,78,146,.05); transition:box-shadow var(--transition-fast), transform var(--transition-fast), border-color var(--transition-fast); height:var(--card-height); }
.book-card.bright:hover { transform:translateY(-5px); box-shadow:0 10px 22px -6px rgba(38,78,146,.18),0 4px 10px -2px rgba(38,78,146,.12); border-color:#d3dde8; }
.book-card:active { transform:translateY(-2px); }

/* Portada */
.book-thumb-shell { width:100%; aspect-ratio:10/14.5; background:linear-gradient(135deg,#f0f6ff,#ffffff); position:relative; display:flex; align-items:center; justify-content:center; padding:.4rem .55rem .65rem; }
.book-thumb-shell.loading { background:linear-gradient(90deg,#eef5ff,#f6faff 55%,#eef5ff); }
.book-thumb-shell img { width:100%; height:100%; object-fit:contain; filter:drop-shadow(0 4px 6px rgba(50,80,120,.15)); transition:transform 500ms var(--ease); }
.book-card:hover .book-thumb-shell img { transform:scale(1.04); }
.thumb-skeleton { position:absolute; inset:0; background:linear-gradient(110deg,#eef5ff 8%,#f5faff 38%,#eef5ff 68%); background-size:200% 100%; animation:shimmer 1.3s linear infinite; }
.book-image-placeholder { font-size:2rem; opacity:.35; color:#8a95a3; }

/* Contenido */
.book-content { flex:1; display:flex; flex-direction:column; padding:0.85rem 1rem 1rem; gap:.55rem; }
.book-title-main { margin:0; font-size:1rem; font-weight:700; letter-spacing:-.3px; color:#1f2d40; line-height:1.22; max-height:2.45em; overflow:hidden; display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; }
.book-title-main.tight { font-size:.93rem; }
.meta-chips { display:flex; flex-wrap:wrap; gap:.4rem; margin-top:.15rem; }
.chip { background:#eef5ff; color:#2d5ca8; padding:.3rem .65rem .4rem; font-size:.62rem; font-weight:600; letter-spacing:.6px; border-radius:999px; text-transform:uppercase; border:1px solid #d4e4f7; position:relative; }
.chip-fuente { background:#ffeede; color:#c25218; border-color:#f8d0af; }
.chip-pág { background:#eaf9ef; color:#247746; border-color:#c6ebd3; }
.chip-género { background:#f2e9ff; color:#6a36b2; border-color:#dfc9fb; }
.chip-isbn { background:#fff3d9; color:#996d07; border-color:#ecd59d; }
.desc-brief { font-size:.7rem; line-height:1.35; color:#5a6674; margin:0; max-height:3.9em; overflow:hidden; }

.book-actions { margin-top:auto; display:flex; padding-top:.35rem; }
.book-actions .btn { box-shadow:none; }
.book-actions .btn:hover { box-shadow:0 4px 10px -3px rgba(45,92,168,.25); }

/* Variante classic (minimal) */
.book-card.classic { --card-height:340px; background:#ffffff; border:1px solid #e5ecf3; box-shadow:0 2px 5px rgba(30,60,110,.06),0 1px 2px rgba(30,60,110,.05); border-radius:18px; }
.book-card.classic:hover { box-shadow:0 6px 16px -4px rgba(40,70,120,.15); }
.book-card.classic .book-thumb-shell { aspect-ratio:10/14.2; background:#f2f7fc; }
.book-card.classic .book-content { padding:.75rem .85rem .85rem; gap:.45rem; }
.bc-title { margin:0; font-size:.95rem; font-weight:650; color:#1f2d40; line-height:1.25; max-height:2.5em; overflow:hidden; display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; }
.bc-title.tight { font-size:.9rem; }
.bc-author { margin:0; font-size:.7rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; color:#3562ad; }
.bc-line { margin:0; font-size:.65rem; color:#5a6674; letter-spacing:.3px; }
.bc-source { margin:0; font-size:.6rem; text-transform:uppercase; font-weight:600; letter-spacing:.55px; color:#8a95a3; }
.bc-desc { margin:.1rem 0 0; font-size:.66rem; line-height:1.25; color:#55606d; max-height:2.6em; overflow:hidden; }
.book-card.classic .book-actions { padding-top:.4rem; }

/* Botón favorito */
.favorite-btn { position:absolute; top:8px; right:8px; width:38px; height:38px; display:flex; align-items:center; justify-content:center; background:#ffffffee; border:1px solid #dbe5ef; border-radius:14px; box-shadow:0 4px 10px -2px rgba(45,66,98,.12); cursor:pointer; transition:var(--transition-fast); color:#d84848; font-weight:600; }
.favorite-btn:hover { background:#ffe9e9; border-color:#f7c7c7; transform:translateY(-2px); }
.favorite-btn.active { background:#d84848; color:#fff; border-color:#d84848; box-shadow:0 6px 16px -6px rgba(216,72,72,.4); }
.favorite-btn.active:hover { background:#c63d3d; }
.favorite-icon { font-size:1.05rem; transition:transform var(--transition-fast); }
.favorite-btn:hover .favorite-icon { transform:scale(1.15) rotate(-6deg); }

/* Ribbon */
.favorite-ribbon { position:absolute; top:0; left:0; background:linear-gradient(135deg,#ff6f6f,#ff9974); color:#fff; padding:4px 14px 6px 12px; font-size:10px; font-weight:700; letter-spacing:.7px; text-transform:uppercase; border-bottom-right-radius:18px; box-shadow:0 4px 12px -3px rgba(255,111,111,.45); z-index:3; }

/* Animaciones */
@keyframes fav-pop { 0%{ transform:scale(.55); opacity:0;} 50%{transform:scale(1.15); opacity:1;} 100%{transform:scale(1);} }
.favorite-btn.active .favorite-icon { animation:fav-pop .6s var(--ease); }
@keyframes shimmer { 0%{background-position:200% 0;} 100%{background-position:-200% 0;} }

/* Responsive */
@media (max-width:760px){ .book-card { --card-height:340px; } }
@media (max-width:560px){ .book-card { --card-height:320px; } .chip { font-size:.58rem; } .book-title-main { font-size:.95rem; } }
/* === Tarjeta de libro (modo claro refinado) === */
.book-card { position:relative; display:flex; flex-direction:column; background:var(--color-surface); border:1px solid var(--color-border); border-radius:var(--radius-lg); overflow:hidden; box-shadow:var(--shadow-sm); transition:box-shadow var(--transition-fast), transform var(--transition-fast), background var(--transition-fast); }
.book-card { --card-height: 400px; height:var(--card-height); }
.book-card.compact { --card-height:340px; }
.book-card:hover { transform:translateY(-6px); box-shadow:var(--shadow-md); background:var(--color-surface-alt); }

/* Imagen */
.book-thumbnail { width:100%; aspect-ratio: 11 / 16; background:linear-gradient(135deg,var(--color-bg-soft),var(--color-surface-alt)); position:relative; overflow:hidden; display:flex; align-items:center; justify-content:center; }
.book-thumbnail.loading { background:var(--color-bg-soft); }
.thumb-skeleton { position:absolute; inset:0; background:linear-gradient(100deg, var(--color-bg-soft) 10%, var(--color-surface-alt) 40%, var(--color-bg-soft) 70%); background-size:200% 100%; animation:shimmer 1.2s linear infinite; }
.book-thumbnail img { width:100%; height:100%; object-fit:contain; object-position:center; transition:transform 600ms var(--ease), filter 600ms var(--ease), opacity 400ms var(--ease); padding:.35rem; }
.book-source-chip { position:absolute; bottom:6px; left:6px; background:rgba(0,0,0,.55); color:#fff; font-size:9px; letter-spacing:.6px; text-transform:uppercase; padding:4px 8px 5px; border-radius:999px; backdrop-filter:blur(4px); font-weight:600; box-shadow:0 2px 6px -1px rgba(0,0,0,.4); }
.book-card:hover .book-thumbnail img { transform:scale(1.06); filter:contrast(1.05) saturate(1.05); }
.book-image-placeholder { font-size:2.2rem; opacity:.35; color:var(--color-text-faint); }
.book-thumbnail::before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 30% 20%,rgba(255,255,255,.55),transparent 60%); mix-blend-mode:soft-light; pointer-events:none; }

/* Contenido */
.book-content { display:flex; flex-direction:column; gap:.55rem; padding:var(--space-5) var(--space-5) var(--space-6); min-height:230px; }
.book-content { flex:1; }
.book-title { font-size:var(--font-size-md); font-weight:600; line-height:1.25; letter-spacing:-.25px; color:var(--color-text-strong); display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.book-title-tight { font-size:calc(var(--font-size-sm) + 1px); line-height:1.2; }
.book-author, .book-year { font-size:var(--font-size-xs); text-transform:uppercase; letter-spacing:.5px; font-weight:600; color:var(--color-text-soft); display:flex; gap:.35rem; align-items:center; }
.book-description { font-size:var(--font-size-sm); line-height:1.32; color:var(--color-text-soft); margin-top:.45rem; position:relative; }
.book-description:not(.expanded) { display:-webkit-box; -webkit-line-clamp:4; line-clamp:4; -webkit-box-orient:vertical; overflow:hidden; }
.desc-toggle { background:none; border:none; color:var(--color-primary); font-weight:600; cursor:pointer; font-size:var(--font-size-xs); padding:0 4px; }
.desc-toggle:hover { text-decoration:underline; }
.book-actions { margin-top:auto; display:flex; padding-top:.75rem; }

/* Meta organizado */
.book-meta { display:grid; grid-template-columns:repeat(auto-fit,minmax(90px,1fr)); gap:.4rem .75rem; margin-top:.15rem; }
.book-meta-item { display:flex; flex-direction:column; background:var(--color-surface-alt); border:1px solid var(--color-border); border-radius:8px; padding:.4rem .55rem; min-height:52px; justify-content:center; }
.book-meta-item span { font-size:10px; letter-spacing:.6px; text-transform:uppercase; color:var(--color-text-faint); font-weight:600; }
.book-meta-item strong { font-size:var(--font-size-xs); font-weight:600; color:var(--color-text-soft); line-height:1.2; max-width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.book-meta-more { grid-column:1 / -1; display:flex; flex-wrap:wrap; gap:.35rem; margin-top:.15rem; }
.meta-pill { background:var(--color-surface-alt); border:1px solid var(--color-border); padding:.25rem .6rem .3rem; font-size:10px; border-radius:999px; font-weight:600; letter-spacing:.4px; color:var(--color-text-soft); }

@media (max-width:680px){
  .book-card { --card-height: 360px; }
  .book-card.compact { --card-height:320px; }
  .book-meta-item { min-height:48px; }
  .book-description:not(.expanded) { -webkit-line-clamp:5; line-clamp:5; }
}
@media (max-width:480px){
  .book-card { --card-height: 340px; }
  .book-card.compact { --card-height:300px; }
}

/* Botón favorito */
.favorite-btn, .favorite-float-btn { position:absolute; top:.7rem; right:.7rem; width:40px; height:40px; display:flex; align-items:center; justify-content:center; background:var(--color-surface); border:1px solid var(--color-border); border-radius:14px; box-shadow:0 4px 10px -2px rgba(24,34,48,.15); cursor:pointer; transition:var(--transition-fast); color:var(--color-text-soft); }
.favorite-btn:hover, .favorite-float-btn:hover { color:var(--color-danger); border-color:var(--color-danger-soft); background:var(--color-danger-soft); transform:translateY(-2px); }
.favorite-btn.active, .favorite-float-btn.active { background:var(--color-danger); border-color:var(--color-danger); color:#fff; box-shadow:0 6px 14px -4px rgba(216,72,72,.45); }
.favorite-btn.active:hover, .favorite-float-btn.active:hover { background:#c63d3d; }
.favorite-icon { font-size:1.05rem; transition:transform var(--transition-fast); }
.favorite-btn:hover .favorite-icon, .favorite-float-btn:hover .favorite-icon { transform:scale(1.15) rotate(-6deg); }

/* Ribbon */
.favorite-ribbon { position:absolute; top:0; right:0; background:linear-gradient(135deg,#d84848,#ed6a5a); color:#fff; padding:4px 12px 6px 14px; font-size:10px; font-weight:700; letter-spacing:.7px; text-transform:uppercase; border-bottom-left-radius:14px; box-shadow:0 4px 12px -3px rgba(216,72,72,.45); z-index:3; }

/* Animaciones pequeñas */
@keyframes fav-pop { 0%{ transform:scale(.7); opacity:0;} 50%{transform:scale(1.08); opacity:1;} 100%{transform:scale(1);} }
.favorite-btn.active .favorite-icon { animation:fav-pop .55s var(--ease); }

/* Responsivo */
@media (max-width:680px){
  .book-content { padding:var(--space-4) var(--space-4) var(--space-5); }
  .book-title { font-size:var(--font-size-base); }
  .favorite-btn { width:34px; height:34px; border-radius:12px; }
}
@media (max-width:480px){
  .book-card { border-radius:var(--radius-md); }
  .book-content { padding:var(--space-4); }
  .book-title { font-size:var(--font-size-sm); }
  .book-description:not(.expanded) { -webkit-line-clamp:4; line-clamp:4; }
}

@keyframes shimmer { 0%{background-position:200% 0;} 100%{background-position:-200% 0;} }