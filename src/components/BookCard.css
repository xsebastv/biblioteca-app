/* === Tarjeta de libro premium === */

.book-card { 
  position: relative; 
  display: flex; 
  flex-direction: column; 
  background: var(--color-surface); 
  border: 1px solid var(--color-border); 
  border-radius: var(--radius-xl); 
  overflow: hidden; 
  box-shadow: var(--shadow-md); 
  transition: all var(--transition); 
  isolation: isolate;
  cursor: pointer;
}

.book-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.2) 50%, transparent 100%);
  opacity: 0;
  transition: opacity var(--transition);
  pointer-events: none;
}

.book-card::after { 
  content: ""; 
  position: absolute; 
  inset: 0; 
  background: linear-gradient(135deg, rgba(var(--color-primary-rgb)/0) 40%, rgba(var(--color-primary-rgb)/0.08) 100%); 
  opacity: 0; 
  transition: opacity var(--transition); 
  pointer-events: none; 
}

.book-card:hover { 
  transform: translateY(-8px) scale(1.02); 
  box-shadow: var(--shadow-xl), var(--shadow-glow); 
  border-color: var(--color-primary-soft);
}

.book-card:hover::before { opacity: 0.6; }
.book-card:hover::after { opacity: 1; }

/* Imagen mejorada */
.book-thumbnail { 
  width: 100%; 
  aspect-ratio: 3/4.2; 
  background: linear-gradient(145deg, var(--color-bg-soft), var(--color-border)); 
  position: relative; 
  overflow: hidden; 
  display: flex; 
  align-items: center; 
  justify-content: center;
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.book-thumbnail img { 
  width: 100%; 
  height: 100%; 
  object-fit: cover; 
  transition: all var(--transition-slow); 
  filter: contrast(1.05) saturate(1.1);
}

.book-card:hover .book-thumbnail img { 
  transform: scale(1.08); 
  filter: contrast(1.1) saturate(1.15) brightness(1.05); 
}

.book-image-placeholder { 
  font-size: 2.5rem; 
  opacity: 0.3;
  color: var(--color-text-faint);
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
}

.book-thumbnail::before { 
  content: ""; 
  position: absolute; 
  inset: 0; 
  background: 
    radial-gradient(circle at 30% 20%, rgba(255,255,255,0.4), transparent 60%),
    linear-gradient(135deg, rgba(41,82,204,0.05), transparent 70%);
  mix-blend-mode: overlay; 
  pointer-events: none; 
  transition: opacity var(--transition);
}

.book-card:hover .book-thumbnail::before { opacity: 0.7; }

/* Contenido */
.book-content { display:flex; flex-direction:column; gap:.55rem; padding:var(--space-5) var(--space-5) var(--space-6); min-height:230px; }
.book-title { font-size:var(--font-size-md); font-weight:600; line-height:1.25; letter-spacing:-.25px; color:var(--color-text-strong); display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.book-author, .book-year { font-size:var(--font-size-xs); text-transform:uppercase; letter-spacing:.5px; font-weight:600; color:var(--color-text-soft); display:flex; gap:.35rem; align-items:center; }
.book-description { font-size:var(--font-size-sm); line-height:1.4; color:var(--color-text-soft); display:-webkit-box; -webkit-line-clamp:3; line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; margin-top:.2rem; }
.book-actions { margin-top:auto; display:flex; padding-top:.75rem; }

/* Botón favorito mejorado */
.favorite-btn, .favorite-float-btn { 
  position: absolute; 
  top: 1rem; 
  right: 1rem; 
  width: 44px; 
  height: 44px; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  background: rgba(255,255,255,0.95); 
  border: 1px solid var(--color-border); 
  border-radius: var(--radius-pill); 
  backdrop-filter: blur(8px); 
  box-shadow: var(--shadow-md); 
  cursor: pointer; 
  transition: all var(--transition); 
  color: var(--color-text-soft);
  z-index: 10;
}

.favorite-btn:hover, .favorite-float-btn:hover { 
  color: var(--color-accent); 
  border-color: var(--color-accent); 
  background: var(--color-accent-soft); 
  transform: translateY(-3px) scale(1.05); 
  box-shadow: var(--shadow-lg);
}

.favorite-btn.active, .favorite-float-btn.active { 
  background: var(--color-accent); 
  border-color: var(--color-accent); 
  color: #fff; 
  box-shadow: 0 8px 20px -6px rgba(245,101,101,0.5); 
}

.favorite-btn.active:hover, .favorite-float-btn.active:hover { 
  background: var(--color-accent-hover); 
  transform: translateY(-3px) scale(1.1);
}

.favorite-icon { 
  font-size: 1.1rem; 
  transition: transform var(--transition); 
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
}

.favorite-btn:hover .favorite-icon, 
.favorite-float-btn:hover .favorite-icon { 
  transform: scale(1.2) rotate(-12deg); 
}

.favorite-btn.active .favorite-icon,
.favorite-float-btn.active .favorite-icon { 
  transform: scale(1.1);
}

/* Ribbon mejorado */
.favorite-ribbon { 
  position: absolute; 
  top: 0; 
  right: 0; 
  background: linear-gradient(135deg, var(--color-accent), #ff8a80); 
  color: #fff; 
  padding: 6px 16px 8px 18px; 
  font-size: 10px; 
  font-weight: 700; 
  letter-spacing: 0.8px; 
  text-transform: uppercase; 
  border-bottom-left-radius: var(--radius-lg); 
  box-shadow: 0 6px 16px -4px rgba(245,101,101,0.6); 
  z-index: 5;
  animation: slide-up 0.5s var(--ease);
}

.favorite-ribbon::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(45deg, rgba(255,255,255,0.3), transparent);
  border-radius: inherit;
}

/* Animaciones pequeñas */
@keyframes fav-pop { 0%{ transform:scale(.7); opacity:0;} 50%{transform:scale(1.08); opacity:1;} 100%{transform:scale(1);} }
.favorite-btn.active .favorite-icon { animation:fav-pop .55s var(--ease); }

/* Responsivo */
@media (max-width:680px){
  .book-content { padding:var(--space-4) var(--space-4) var(--space-5); }
  .book-title { font-size:var(--font-size-base); }
  .favorite-btn { width:34px; height:34px; border-radius:12px; }
}
@media (max-width:480px){
  .book-card { border-radius:var(--radius-md); }
  .book-content { padding:var(--space-4); }
  .book-title { font-size:var(--font-size-sm); }
  .book-description { -webkit-line-clamp:4; line-clamp:4; }
}